{"ast":null,"code":"import _classCallCheck from\"/Users/jay/projects/shop_it_django/shop_it_frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jay/projects/shop_it_django/shop_it_frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/jay/projects/shop_it_django/shop_it_frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/jay/projects/shop_it_django/shop_it_frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/jay/projects/shop_it_django/shop_it_frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Axios from'axios';import Login from'./Login';import Signup from'./Signup';import Api from'../apis/api';var Register=/*#__PURE__*/function(_Component){_inherits(Register,_Component);function Register(){var _getPrototypeOf2;var _this;_classCallCheck(this,Register);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Register)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={loggedIn:localStorage.token?true:false,username:localStorage.username||null,displayedForm:null};_this.handleSignup=function(e,data){e.preventDefault();Api.post(\"users/\",{username:data.username,password:data.password}).then(function(res){console.log(res.data);localStorage.token=res.data.token;localStorage.userId=res.data.id;localStorage.username=res.data.username;console.log(res.statusText);});};_this.handleLogin=function(e,data){e.preventDefault();Axios.post(\"http://localhost:8000/authenticate/\",data,{headers:{\"Content-Type\":\"application/json\"}}).then(function(res){localStorage.token=res.data.token;localStorage.userId=res.data.id;localStorage.username=res.data.username;console.log(res.statusText);});};_this.handleLogout=function(e){e.preventDefault();localStorage.token=\"\";localStorage.userId=\"\";localStorage.username=\"\";_this.setState({loggedIn:false});};_this.displayForm=function(form){_this.setState({displayedForm:form});};_this.loggedOutNav=React.createElement(\"div\",{className:\"center\"},React.createElement(\"ul\",null,React.createElement(\"li\",{className:\"btn btn-primary login-button\",onClick:function onClick(){return _this.displayForm(\"login\");}},\"Login\"),React.createElement(\"li\",{className:\"btn btn-primary signup-button\",onClick:function onClick(){return _this.displayForm(\"signup\");}},\"Signup\")));_this.loggedInNav=React.createElement(\"button\",{className:\"btn btn-warning logout-button\",onClick:_this.handleLogout},\"Logout\");return _this;}_createClass(Register,[{key:\"render\",value:function render(){var form;switch(this.state.displayedForm){case\"login\":form=React.createElement(Login,{handleLogin:this.handleLogin});break;case\"signup\":form=React.createElement(Signup,{handleSignup:this.handleSignup});break;default:form=null;}return React.createElement(\"div\",{className:\"container\"},this.state.loggedIn?this.loggedInNav:this.loggedOutNav,form,React.createElement(\"h3\",null,this.state.loggedIn?\"Hello, \".concat(localStorage.username):\"Please Log In\"));}}]);return Register;}(Component);export default Register;","map":{"version":3,"sources":["/Users/jay/projects/shop_it_django/shop_it_frontend/src/components/Register.js"],"names":["React","Component","Axios","Login","Signup","Api","Register","state","loggedIn","localStorage","token","username","displayedForm","handleSignup","e","data","preventDefault","post","password","then","res","console","log","userId","id","statusText","handleLogin","headers","handleLogout","setState","displayForm","form","loggedOutNav","loggedInNav"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'; \nimport Axios from 'axios'; \nimport Login from './Login'\nimport Signup from './Signup' \nimport Api from '../apis/api'\n\nclass Register extends Component {\n  state = {\n    loggedIn: localStorage.token ? true : false,\n    username: localStorage.username || null,\n    displayedForm: null\n  };\n\n  handleSignup = (e, data) => {\n    e.preventDefault();\n    Api.post(\"users/\", {\n      username: data.username,\n      password: data.password\n    }).then(res => {\n      console.log(res.data);\n      localStorage.token = res.data.token;\n      localStorage.userId = res.data.id;\n      localStorage.username = res.data.username;\n      console.log(res.statusText);\n    });\n  };\n\n  handleLogin = (e, data) => {\n    e.preventDefault();\n    Axios.post(\"http://localhost:8000/authenticate/\", data, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => {\n      localStorage.token = res.data.token;\n      localStorage.userId = res.data.id;\n      localStorage.username = res.data.username;\n      console.log(res.statusText);\n    });\n  };\n\n  handleLogout = e => {\n    e.preventDefault();\n    localStorage.token = \"\";\n    localStorage.userId = \"\";\n    localStorage.username = \"\";\n\n    this.setState({ loggedIn: false });\n  };\n\n  displayForm = form => {\n    this.setState({\n      displayedForm: form\n    });\n  };\n\n  loggedOutNav = (\n    <div className=\"center\">\n      <ul>\n        <li\n          className=\"btn btn-primary login-button\"\n          onClick={() => this.displayForm(\"login\")}\n        >\n          Login\n        </li>\n\n        <li\n          className=\"btn btn-primary signup-button\"\n          onClick={() => this.displayForm(\"signup\")}\n        >\n          Signup\n        </li>\n      </ul>\n    </div>\n  );\n  loggedInNav = (\n    <button\n      className=\"btn btn-warning logout-button\"\n      onClick={this.handleLogout}\n    >\n      Logout\n    </button>\n  );\n\n  render() {\n    let form;\n    switch (this.state.displayedForm) {\n      case \"login\":\n        form = <Login handleLogin={this.handleLogin} />;\n        break;\n      case \"signup\":\n        form = <Signup handleSignup={this.handleSignup} />;\n        break;\n      default:\n        form = null;\n    }\n    return (\n      <div className=\"container\">\n        {this.state.loggedIn ? this.loggedInNav : this.loggedOutNav}\n        {form}\n        <h3>\n          {this.state.loggedIn\n            ? `Hello, ${localStorage.username}`\n            : \"Please Log In\"}\n        </h3>\n      </div>\n    );\n  }\n}\n    \n    \nexport default Register;"]},"metadata":{},"sourceType":"module"}